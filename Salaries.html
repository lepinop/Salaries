
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Tendencias Salariales en Empleos de Ciencia de Datos, AI y ML (2025) &#8212; Análisis de Salarios</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css?v=6644e6bb" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Salaries';</script>
    <link rel="icon" href="_static/Salaries.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Welcome to your Jupyter Book" href="intro.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/Salaries.png" class="logo__image only-light" alt="Análisis de Salarios - Home"/>
    <script>document.write(`<img src="_static/Salaries.png" class="logo__image only-dark" alt="Análisis de Salarios - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    Welcome to your Jupyter Book
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active"><a class="current reference internal" href="#"><strong>Tendencias Salariales en Empleos de Ciencia de Datos, AI y ML (2025)</strong></a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2FSalaries.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/Salaries.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Tendencias Salariales en Empleos de Ciencia de Datos, AI y ML (2025)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduccion"><strong>Introducción</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objetivo"><strong>Objetivo</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#importaciones-y-configuracion-inicial">1. Importaciones y configuración inicial</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#carga-de-datos-y-seleccion-de-columnas">2. Carga de datos y selección de columnas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-exploratorio-de-datos-eda">3. Análisis exploratorio de datos - EDA</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dataset"><strong>Dataset</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variables"><strong>Variables</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#distribucion-de-variables-numericas">Distribución de variables numéricas</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#distribucion-de-variables-categoricas">Distribución de variables categóricas</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tasa-anual-de-contratacion-de-profesionales-en-ciencia-de-datos">Tasa anual de contratación de profesionales en ciencia de datos</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#impacto-del-nivel-de-experiencia-en-las-oportunidades-de-empleo-cada-ano">Impacto del nivel de experiencia en las oportunidades de empleo cada año</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cambio-de-salarios-a-lo-largo-del-tiemp">Cambio de salarios a lo largo del tiemp</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#distribucion-salarial-segun-el-nivel-de-experiencia">Distribución salarial según el nivel de experiencia</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#salarios-segun-el-tipo-de-empleo">Salarios según el tipo de empleo</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#titulos-de-trabajo-con-los-salarios-promedios-mas-altos">Títulos de trabajo con los salarios promedios más altos</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#los-titulos-de-trabajo-mas-comunes">Los títulos de trabajo más comunes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#impacto-del-trabajo-remoto-en-el-salario">Impacto del trabajo remoto en el salario</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#influencia-del-tamano-de-la-empresa-en-el-salario">Influencia del tamaño de la empresa en el salario</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#relacion-entre-el-tamano-de-la-empresa-y-la-contratacion-de-empleados-remotos">Relación entre el tamaño de la empresa y la contratación de empleados remotos</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#matriz-de-correlacion">Matriz de correlación</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#split-train-test">4. Split Train / Test</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#preprocesamiento">5. Preprocesamiento</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#modelos-y-busqueda-de-hiperparametros">6. Modelos y búsqueda de hiperparámetros</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#funciones-auxiliares">7. Funciones auxiliares</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loop-para-evaluar-modelos-graficas-bds">8. Loop para evaluar modelos + gráficas + BDS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dataframe-de-resultados-y-grafico-comparativo">9. DataFrame de resultados y gráfico comparativo</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion"><strong>Conclusión</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion-general">Conclusión general:</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="tendencias-salariales-en-empleos-de-ciencia-de-datos-ai-y-ml-2025">
<h1><strong>Tendencias Salariales en Empleos de Ciencia de Datos, AI y ML (2025)</strong><a class="headerlink" href="#tendencias-salariales-en-empleos-de-ciencia-de-datos-ai-y-ml-2025" title="Link to this heading">#</a></h1>
<p><strong>Autores:</strong> Laura Cardona Ahumada, Elian Martinez Orozco, Evelyn Mondul y Luis Pino Perez</p>
<p><strong>Fecha:</strong> agosto 2025</p>
<hr class="docutils" />
<section id="introduccion">
<h2><strong>Introducción</strong><a class="headerlink" href="#introduccion" title="Link to this heading">#</a></h2>
<p>Esta base de datos presenta información actualizada sobre salarios globales en 2025 para profesionales de Ciencia de Datos, Aprendizaje Automático e Inteligencia Artificial. Fue construida a partir de fuentes públicas como AIJobs, 365DataScience, Payscale, KDnuggets y ZipRecruiter, y está orientada a apoyar análisis de mercado, modelos predictivos, visualizaciones interactivas y estudios sobre trabajo remoto.</p>
<p>El conjunto de datos fue obtenido desde Kaggle, a partir del recurso publicado por el usuario adilshamim8 bajo el título “Salaries for Data Science Jobs”: <a class="reference external" href="https://www.kaggle.com/datasets/adilshamim8/salaries-for-data-science-jobs?resource=download">https://www.kaggle.com/datasets/adilshamim8/salaries-for-data-science-jobs?resource=download</a>. Su contenido resulta útil para investigadores, profesionales del sector, estudiantes y reclutadores que buscan entender las dinámicas actuales de compensación en el ámbito tecnológico.</p>
<hr class="docutils" />
</section>
<section id="objetivo">
<h2><strong>Objetivo</strong><a class="headerlink" href="#objetivo" title="Link to this heading">#</a></h2>
<p>El presente análisis tiene como objetivo desarrollar un modelo de aprendizaje automático capaz de predecir el rango salarial de empleos relacionados con Ciencia de Datos, Inteligencia Artificial y Aprendizaje Automático, a partir de información sobre características laborales y profesionales.<br />
Además, se realizará un análisis exploratorio detallado de los datos para identificar patrones, desigualdades y factores determinantes del salario en estas áreas tecnológicas emergentes.</p>
<hr class="docutils" />
<p>En este notebook se encuentran las siguientes sesiones:</p>
<ol class="arabic simple">
<li><p>Importaciones y configuración inicial</p></li>
<li><p>Carga de datos y selección de columnas</p></li>
<li><p>Análisis exploratorio de datos - EDA</p></li>
<li><p>Split Train / Validation / Test</p></li>
<li><p>Preprocesamiento</p></li>
<li><p>Modelos y búsqueda de hiperparámetros</p></li>
<li><p>Funciones auxiliares</p></li>
<li><p>Loop para evaluar modelos + gráficas + BDS</p></li>
<li><p>DataFrame de resultados y gráfico comparativo</p></li>
</ol>
</section>
<section id="importaciones-y-configuracion-inicial">
<h2>1. Importaciones y configuración inicial<a class="headerlink" href="#importaciones-y-configuracion-inicial" title="Link to this heading">#</a></h2>
<p>Aquí cargamos todas las librerías necesarias:</p>
<ol class="arabic simple">
<li><p>Sklearn → para modelos, pipelines, métricas y validación cruzada.</p></li>
<li><p>XGBoost y MLP → modelos más avanzados.</p></li>
<li><p>statsmodels.tsa.stattools → para el BDS test en los residuos.</p></li>
<li><p>Matplotlib / PrettyTable → para gráficos y tablas estructuradas.</p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.compose</span><span class="w"> </span><span class="kn">import</span> <span class="n">ColumnTransformer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.pipeline</span><span class="w"> </span><span class="kn">import</span> <span class="n">Pipeline</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.preprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">OneHotEncoder</span><span class="p">,</span> <span class="n">MaxAbsScaler</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.impute</span><span class="w"> </span><span class="kn">import</span> <span class="n">SimpleImputer</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.linear_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">Ridge</span><span class="p">,</span> <span class="n">Lasso</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.neighbors</span><span class="w"> </span><span class="kn">import</span> <span class="n">KNeighborsRegressor</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.tree</span><span class="w"> </span><span class="kn">import</span> <span class="n">DecisionTreeRegressor</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.svm</span><span class="w"> </span><span class="kn">import</span> <span class="n">SVR</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.neural_network</span><span class="w"> </span><span class="kn">import</span> <span class="n">MLPRegressor</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.model_selection</span><span class="w"> </span><span class="kn">import</span> <span class="n">GridSearchCV</span><span class="p">,</span> <span class="n">RandomizedSearchCV</span><span class="p">,</span> <span class="n">train_test_split</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="n">mean_absolute_error</span><span class="p">,</span> <span class="n">mean_squared_error</span><span class="p">,</span> <span class="n">mean_absolute_percentage_error</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">xgboost</span><span class="w"> </span><span class="kn">import</span> <span class="n">XGBRegressor</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy.stats</span><span class="w"> </span><span class="kn">import</span> <span class="n">randint</span><span class="p">,</span> <span class="n">uniform</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">statsmodels.tsa.stattools</span><span class="w"> </span><span class="kn">import</span> <span class="n">bds</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">prettytable</span><span class="w"> </span><span class="kn">import</span> <span class="n">PrettyTable</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="carga-de-datos-y-seleccion-de-columnas">
<h2>2. Carga de datos y selección de columnas<a class="headerlink" href="#carga-de-datos-y-seleccion-de-columnas" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Leemos el archivo salaries.csv.</p></li>
<li><p>Definimos variables categóricas (ejemplo: job_title, company_size) y numéricas (ejemplo: salario, work_year).</p></li>
<li><p>Construimos X_full (features) y y_full_price (target → salary_in_usd).</p></li>
</ol>
<p>Aquí limpiamos y organizamos el dataset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">DATA_PATH</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;C:\Users\LUIS PINO\Documents\Machine_learning\Proyecto_final\salaries.csv&quot;</span>
<span class="n">defg</span><span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">DATA_PATH</span><span class="p">)</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">defg</span><span class="p">[</span><span class="n">defg</span><span class="p">[</span><span class="s1">&#39;work_year&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2025</span><span class="p">]</span>

<span class="n">categorical_features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;experience_level&#39;</span><span class="p">,</span><span class="s1">&#39;employment_type&#39;</span><span class="p">,</span><span class="s1">&#39;job_title&#39;</span><span class="p">,</span><span class="s1">&#39;salary_currency&#39;</span><span class="p">,</span><span class="s1">&#39;employee_residence&#39;</span><span class="p">,</span><span class="s1">&#39;company_location&#39;</span><span class="p">,</span><span class="s1">&#39;company_size&#39;</span><span class="p">]</span>
<span class="n">numeric_features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;salary&#39;</span><span class="p">,</span><span class="s1">&#39;salary_in_usd&#39;</span><span class="p">,</span><span class="s1">&#39;remote_ratio&#39;</span><span class="p">]</span>

<span class="n">categorical_features</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">categorical_features</span> <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
<span class="n">numeric_features</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">numeric_features</span> <span class="k">if</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>

<span class="n">X_full</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">categorical_features</span> <span class="o">+</span> <span class="n">numeric_features</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">y_full_price</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;salary_in_usd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="analisis-exploratorio-de-datos-eda">
<h2>3. Análisis exploratorio de datos - EDA<a class="headerlink" href="#analisis-exploratorio-de-datos-eda" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s1">&#39;whitegrid&#39;</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="s1">&#39;Set2&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>

<span class="c1"># Mostrar las primeras filas</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>work_year</th>
      <th>experience_level</th>
      <th>employment_type</th>
      <th>job_title</th>
      <th>salary</th>
      <th>salary_currency</th>
      <th>salary_in_usd</th>
      <th>employee_residence</th>
      <th>remote_ratio</th>
      <th>company_location</th>
      <th>company_size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2025</td>
      <td>EX</td>
      <td>FT</td>
      <td>Head of Data</td>
      <td>348516</td>
      <td>USD</td>
      <td>348516</td>
      <td>US</td>
      <td>0</td>
      <td>US</td>
      <td>M</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2025</td>
      <td>EX</td>
      <td>FT</td>
      <td>Head of Data</td>
      <td>232344</td>
      <td>USD</td>
      <td>232344</td>
      <td>US</td>
      <td>0</td>
      <td>US</td>
      <td>M</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2025</td>
      <td>SE</td>
      <td>FT</td>
      <td>Data Scientist</td>
      <td>145400</td>
      <td>USD</td>
      <td>145400</td>
      <td>US</td>
      <td>0</td>
      <td>US</td>
      <td>M</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2025</td>
      <td>SE</td>
      <td>FT</td>
      <td>Data Scientist</td>
      <td>81600</td>
      <td>USD</td>
      <td>81600</td>
      <td>US</td>
      <td>0</td>
      <td>US</td>
      <td>M</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2025</td>
      <td>MI</td>
      <td>FT</td>
      <td>Engineer</td>
      <td>160000</td>
      <td>USD</td>
      <td>160000</td>
      <td>US</td>
      <td>100</td>
      <td>US</td>
      <td>M</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<section id="dataset">
<h3><strong>Dataset</strong><a class="headerlink" href="#dataset" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Dimensiones</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Filas: </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">, Columnas: </span><span class="si">{</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Tipos de datos</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">dtypes</span><span class="p">)</span>

<span class="c1"># Información general</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">())</span>

<span class="c1"># Estadísticas descriptivas</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">))</span>

<span class="c1"># duplicadas</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Filas duplicadas:&quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">duplicated</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Filas: 78726, Columnas: 11
work_year              int64
experience_level      object
employment_type       object
job_title             object
salary                 int64
salary_currency       object
salary_in_usd          int64
employee_residence    object
remote_ratio           int64
company_location      object
company_size          object
dtype: object
&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
Index: 78726 entries, 0 to 78850
Data columns (total 11 columns):
 #   Column              Non-Null Count  Dtype 
---  ------              --------------  ----- 
 0   work_year           78726 non-null  int64 
 1   experience_level    78726 non-null  object
 2   employment_type     78726 non-null  object
 3   job_title           78726 non-null  object
 4   salary              78726 non-null  int64 
 5   salary_currency     78726 non-null  object
 6   salary_in_usd       78726 non-null  int64 
 7   employee_residence  78726 non-null  object
 8   remote_ratio        78726 non-null  int64 
 9   company_location    78726 non-null  object
 10  company_size        78726 non-null  object
dtypes: int64(4), object(7)
memory usage: 7.2+ MB
None
        work_year experience_level employment_type          job_title  \
count     78726.0            78726           78726              78726   
unique        NaN                4               3                316   
top           NaN               SE              FT  Software Engineer   
freq          NaN            44827           78163               9191   
mean       2025.0              NaN             NaN                NaN   
std           0.0              NaN             NaN                NaN   
min        2025.0              NaN             NaN                NaN   
25%        2025.0              NaN             NaN                NaN   
50%        2025.0              NaN             NaN                NaN   
75%        2025.0              NaN             NaN                NaN   
max        2025.0              NaN             NaN                NaN   

              salary salary_currency  salary_in_usd employee_residence  \
count   7.872600e+04           78726   78726.000000              78726   
unique           NaN              18            NaN                 74   
top              NaN             USD            NaN                 US   
freq             NaN           74162            NaN              69914   
mean    1.629982e+05             NaN  157018.982585                NaN   
std     2.206844e+05             NaN   75599.012724                NaN   
min     1.440000e+04             NaN   15157.000000                NaN   
25%     1.050000e+05             NaN  104885.250000                NaN   
50%     1.460000e+05             NaN  145100.000000                NaN   
75%     1.975000e+05             NaN  197000.000000                NaN   
max     3.000000e+07             NaN  800000.000000                NaN   

        remote_ratio company_location company_size  
count   78726.000000            78726        78726  
unique           NaN               73            3  
top              NaN               US            M  
freq             NaN            69920        77189  
mean       20.316033              NaN          NaN  
std        40.219553              NaN          NaN  
min         0.000000              NaN          NaN  
25%         0.000000              NaN          NaN  
50%         0.000000              NaN          NaN  
75%         0.000000              NaN          NaN  
max       100.000000              NaN          NaN  

Filas duplicadas: 40444
</pre></div>
</div>
</div>
</div>
</section>
<section id="variables">
<h3><strong>Variables</strong><a class="headerlink" href="#variables" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
Index: 78726 entries, 0 to 78850
Data columns (total 11 columns):
 #   Column              Non-Null Count  Dtype 
---  ------              --------------  ----- 
 0   work_year           78726 non-null  int64 
 1   experience_level    78726 non-null  object
 2   employment_type     78726 non-null  object
 3   job_title           78726 non-null  object
 4   salary              78726 non-null  int64 
 5   salary_currency     78726 non-null  object
 6   salary_in_usd       78726 non-null  int64 
 7   employee_residence  78726 non-null  object
 8   remote_ratio        78726 non-null  int64 
 9   company_location    78726 non-null  object
 10  company_size        78726 non-null  object
dtypes: int64(4), object(7)
memory usage: 7.2+ MB
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>work_year</th>
      <th>salary</th>
      <th>salary_in_usd</th>
      <th>remote_ratio</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>78726.0</td>
      <td>7.872600e+04</td>
      <td>78726.000000</td>
      <td>78726.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>2025.0</td>
      <td>1.629982e+05</td>
      <td>157018.982585</td>
      <td>20.316033</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.0</td>
      <td>2.206844e+05</td>
      <td>75599.012724</td>
      <td>40.219553</td>
    </tr>
    <tr>
      <th>min</th>
      <td>2025.0</td>
      <td>1.440000e+04</td>
      <td>15157.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>2025.0</td>
      <td>1.050000e+05</td>
      <td>104885.250000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>2025.0</td>
      <td>1.460000e+05</td>
      <td>145100.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>2025.0</td>
      <td>1.975000e+05</td>
      <td>197000.000000</td>
      <td>0.000000</td>
    </tr>
    <tr>
      <th>max</th>
      <td>2025.0</td>
      <td>3.000000e+07</td>
      <td>800000.000000</td>
      <td>100.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>El 93% de los datos corresponden a 2024–2025. Los salarios típicos en USD se ubican entre 105,000 y 198,000, aunque existen outliers muy altos (hasta 800,000). La mitad de los empleos son presenciales, con una proporción menor en teletrabajo total.</p>
<section id="distribucion-de-variables-numericas">
<h4>Distribución de variables numéricas<a class="headerlink" href="#distribucion-de-variables-numericas" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;whitegrid&quot;</span><span class="p">)</span>

<span class="n">numerical_cols</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">number</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span>
<span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">numerical_cols</span><span class="p">)</span>

<span class="c1"># Calcular filas y columnas automáticamente</span>
<span class="n">cols</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">rows</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">//</span> <span class="n">cols</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">n</span> <span class="o">%</span> <span class="n">cols</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="n">rows</span> <span class="o">*</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">axes</span> <span class="o">=</span> <span class="n">axes</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">numerical_cols</span><span class="p">):</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">histplot</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">],</span> <span class="n">kde</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;#4C72B0&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;crimson&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;darkgreen&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s2">&quot;bold&quot;</span><span class="p">)</span>

<span class="c1"># Eliminar ejes vacíos</span>
<span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">axes</span><span class="p">)):</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">delaxes</span><span class="p">(</span><span class="n">axes</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/d8bccf6b5c6de2c17b6de23c7e6665dca9829ee68811402f63ec19ed81e831df.png" src="_images/d8bccf6b5c6de2c17b6de23c7e6665dca9829ee68811402f63ec19ed81e831df.png" />
</div>
</div>
</section>
<section id="distribucion-de-variables-categoricas">
<h4>Distribución de variables categóricas<a class="headerlink" href="#distribucion-de-variables-categoricas" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s2">&quot;whitegrid&quot;</span><span class="p">)</span>
<span class="n">palette_cat</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">&quot;Set2&quot;</span><span class="p">)</span>

<span class="c1"># Función auxiliar: Top N</span>
<span class="k">def</span><span class="w"> </span><span class="nf">plot_top_categories</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">top_n</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Grafica un countplot con las Top N categorías más frecuentes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">top_values</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">nlargest</span><span class="p">(</span><span class="n">top_n</span><span class="p">)</span><span class="o">.</span><span class="n">index</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">top_values</span><span class="p">)]</span>

    <span class="n">ax</span> <span class="o">=</span> <span class="n">sns</span><span class="o">.</span><span class="n">countplot</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="n">x</span><span class="o">=</span><span class="n">col</span><span class="p">,</span>
        <span class="n">order</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="n">col</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
        <span class="n">palette</span><span class="o">=</span><span class="n">palette_cat</span><span class="p">,</span>
        <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span>
        <span class="n">ax</span><span class="o">=</span><span class="n">ax</span>
    <span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">col</span><span class="si">}</span><span class="s1"> (Top </span><span class="si">{</span><span class="n">top_n</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;darkblue&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Frecuencia&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>

    <span class="c1"># Etiquetas en las barras</span>
    <span class="k">for</span> <span class="n">bar</span> <span class="ow">in</span> <span class="n">ax</span><span class="o">.</span><span class="n">patches</span><span class="p">:</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">bar</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">height</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">ax</span><span class="o">.</span><span class="n">annotate</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">height</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> 
                        <span class="p">(</span><span class="n">bar</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span> <span class="o">+</span> <span class="n">bar</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">height</span><span class="p">),</span>
                        <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">va</span><span class="o">=</span><span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
                        <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">xytext</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
                        <span class="n">textcoords</span><span class="o">=</span><span class="s1">&#39;offset points&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">ax</span>


<span class="c1"># Gráficas categóricas</span>
<span class="n">categorical_cols</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">columns</span>

<span class="c1"># Ajustes para columnas específicas</span>
<span class="n">special_top</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;job_title&quot;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>            
    <span class="s2">&quot;employee_residence&quot;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>   
    <span class="s2">&quot;company_location&quot;</span><span class="p">:</span> <span class="mi">15</span>      
<span class="p">}</span>

<span class="c1"># Excluir salary_currency (lo graficamos como pastel)</span>
<span class="n">categorical_cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">categorical_cols</span> <span class="k">if</span> <span class="n">c</span> <span class="o">!=</span> <span class="s2">&quot;salary_currency&quot;</span><span class="p">]</span>

<span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">categorical_cols</span><span class="p">)</span>
<span class="n">cols</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">rows</span> <span class="o">=</span> <span class="p">(</span><span class="n">n</span> <span class="o">//</span> <span class="n">cols</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">n</span> <span class="o">%</span> <span class="n">cols</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axes</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">14</span><span class="p">,</span> <span class="n">rows</span> <span class="o">*</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">axes</span> <span class="o">=</span> <span class="n">axes</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">categorical_cols</span><span class="p">):</span>
    <span class="n">top_n</span> <span class="o">=</span> <span class="n">special_top</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="mi">15</span><span class="p">)</span>  <span class="c1"># por defecto Top 15</span>
    <span class="n">plot_top_categories</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">top_n</span><span class="o">=</span><span class="n">top_n</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">axes</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>

<span class="c1"># Eliminar ejes sobrantes</span>
<span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">axes</span><span class="p">)):</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">delaxes</span><span class="p">(</span><span class="n">axes</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>


<span class="c1"># Gráfico de Salary Currency</span>

<span class="n">currency_counts</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;salary_currency&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">pie</span><span class="p">(</span><span class="n">currency_counts</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="n">currency_counts</span><span class="o">.</span><span class="n">index</span><span class="p">,</span>
        <span class="n">autopct</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%1.1f%%</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">sns</span><span class="o">.</span><span class="n">color_palette</span><span class="p">(</span><span class="s2">&quot;Set3&quot;</span><span class="p">),</span> <span class="n">startangle</span><span class="o">=</span><span class="mi">90</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Distribución de Salary Currency&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">13</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s2">&quot;bold&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;darkblue&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\LUIS PINO\AppData\Local\Temp\ipykernel_27556\2877972932.py:12: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  ax = sns.countplot(
C:\Users\LUIS PINO\AppData\Local\Temp\ipykernel_27556\2877972932.py:12: UserWarning: The palette list has more values (8) than needed (4), which may not be intended.
  ax = sns.countplot(
C:\Users\LUIS PINO\AppData\Local\Temp\ipykernel_27556\2877972932.py:12: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  ax = sns.countplot(
C:\Users\LUIS PINO\AppData\Local\Temp\ipykernel_27556\2877972932.py:12: UserWarning: The palette list has more values (8) than needed (3), which may not be intended.
  ax = sns.countplot(
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\LUIS PINO\AppData\Local\Temp\ipykernel_27556\2877972932.py:12: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  ax = sns.countplot(
C:\Users\LUIS PINO\AppData\Local\Temp\ipykernel_27556\2877972932.py:12: UserWarning: 
The palette list has fewer values (8) than needed (20) and will cycle, which may produce an uninterpretable plot.
  ax = sns.countplot(
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\LUIS PINO\AppData\Local\Temp\ipykernel_27556\2877972932.py:12: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  ax = sns.countplot(
C:\Users\LUIS PINO\AppData\Local\Temp\ipykernel_27556\2877972932.py:12: UserWarning: 
The palette list has fewer values (8) than needed (15) and will cycle, which may produce an uninterpretable plot.
  ax = sns.countplot(
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\LUIS PINO\AppData\Local\Temp\ipykernel_27556\2877972932.py:12: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  ax = sns.countplot(
C:\Users\LUIS PINO\AppData\Local\Temp\ipykernel_27556\2877972932.py:12: UserWarning: 
The palette list has fewer values (8) than needed (15) and will cycle, which may produce an uninterpretable plot.
  ax = sns.countplot(
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>C:\Users\LUIS PINO\AppData\Local\Temp\ipykernel_27556\2877972932.py:12: FutureWarning: 

Passing `palette` without assigning `hue` is deprecated and will be removed in v0.14.0. Assign the `x` variable to `hue` and set `legend=False` for the same effect.

  ax = sns.countplot(
C:\Users\LUIS PINO\AppData\Local\Temp\ipykernel_27556\2877972932.py:12: UserWarning: The palette list has more values (8) than needed (3), which may not be intended.
  ax = sns.countplot(
</pre></div>
</div>
<img alt="_images/0f43fe49f6c758ae9d82e4ec5520608900fb66b70f93f86b90022a9ab7a9b195.png" src="_images/0f43fe49f6c758ae9d82e4ec5520608900fb66b70f93f86b90022a9ab7a9b195.png" />
<img alt="_images/1024752590978b56f8d7429feac4a12840e73ed1829566aba5cb88a838ed6589.png" src="_images/1024752590978b56f8d7429feac4a12840e73ed1829566aba5cb88a838ed6589.png" />
</div>
</div>
</section>
</section>
<section id="tasa-anual-de-contratacion-de-profesionales-en-ciencia-de-datos">
<h3>Tasa anual de contratación de profesionales en ciencia de datos<a class="headerlink" href="#tasa-anual-de-contratacion-de-profesionales-en-ciencia-de-datos" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;work_year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>work_year
2025    78726
Name: count, dtype: int64
</pre></div>
</div>
</div>
</div>
<section id="impacto-del-nivel-de-experiencia-en-las-oportunidades-de-empleo-cada-ano">
<h4>Impacto del nivel de experiencia en las oportunidades de empleo cada año<a class="headerlink" href="#impacto-del-nivel-de-experiencia-en-las-oportunidades-de-empleo-cada-ano" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;work_year&#39;</span><span class="p">)[</span><span class="s1">&#39;experience_level&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>work_year  experience_level
2025       SE                  44827
           MI                  24400
           EN                   6828
           EX                   2671
Name: count, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_counts</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;work_year&#39;</span><span class="p">)[</span><span class="s1">&#39;experience_level&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df_props</span> <span class="o">=</span> <span class="n">df_counts</span><span class="o">.</span><span class="n">div</span><span class="p">(</span><span class="n">df_counts</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">df_props</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Years&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Work Experience&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Work Experience by Years&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/0bb6a6980038664f8eae4a5ba9eee6dc0eae4844a67d70ac23f739d00c77b802.png" src="_images/0bb6a6980038664f8eae4a5ba9eee6dc0eae4844a67d70ac23f739d00c77b802.png" />
</div>
</div>
<p>Se puede evidenciar que el mercado de Ciencia de Datos favorece perfiles Senior y Mid-level, pero sigue abriendo espacio para entry-level, aunque en menor medida.</p>
</section>
<section id="cambio-de-salarios-a-lo-largo-del-tiemp">
<h4>Cambio de salarios a lo largo del tiemp<a class="headerlink" href="#cambio-de-salarios-a-lo-largo-del-tiemp" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;work_year&#39;</span><span class="p">)[</span><span class="s1">&#39;salary_in_usd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>work_year
2025    157018.982585
Name: salary_in_usd, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Después de una ligera caída en 2021, los salarios han mostrado una tendencia creciente hasta 2024, con una leve disminución en 2025.</p>
</section>
<section id="distribucion-salarial-segun-el-nivel-de-experiencia">
<h4>Distribución salarial según el nivel de experiencia<a class="headerlink" href="#distribucion-salarial-segun-el-nivel-de-experiencia" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;experience_level&#39;</span><span class="p">)[</span><span class="s1">&#39;salary_in_usd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>experience_level
EN     96141.221002
EX    201188.182329
MI    141753.112295
SE    171969.451246
Name: salary_in_usd, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">&#39;salary_in_usd&#39;</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="s1">&#39;experience_level&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Salary Distribution by Experience Level&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Experience Level&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Salaries in USD&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/6b613833f07b4864eacd3403238a7176ce801ec4b689011df63817deb31af0b1.png" src="_images/6b613833f07b4864eacd3403238a7176ce801ec4b689011df63817deb31af0b1.png" />
</div>
</div>
<p>Los resultados muestran que el nivel de experiencia tiene un impacto claro en los salarios promedio.</p>
</section>
<section id="salarios-segun-el-tipo-de-empleo">
<h4>Salarios según el tipo de empleo<a class="headerlink" href="#salarios-segun-el-tipo-de-empleo" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;employment_type&#39;</span><span class="p">)[</span><span class="s1">&#39;salary_in_usd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>employment_type
CT    102683.996855
FT    157494.825736
PT     75734.073469
Name: salary_in_usd, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">column</span><span class="o">=</span><span class="s1">&#39;salary_in_usd&#39;</span><span class="p">,</span> <span class="n">by</span><span class="o">=</span><span class="s1">&#39;employment_type&#39;</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Salary Distribution by Employment type&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Employment type&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Salaries in USD&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/9d40b84ea78351c1d0e17b8a05b52ec44d10648ae192c9f1edae283d4ea0b09f.png" src="_images/9d40b84ea78351c1d0e17b8a05b52ec44d10648ae192c9f1edae283d4ea0b09f.png" />
</div>
</div>
<p>Se puede observar que los profesionales a tiempo completo son quienes reciben los salarios más altos en promedio, mientras que los freelancers y los de medio tiempo ganan bastante menos.</p>
</section>
<section id="titulos-de-trabajo-con-los-salarios-promedios-mas-altos">
<h4>Títulos de trabajo con los salarios promedios más altos<a class="headerlink" href="#titulos-de-trabajo-con-los-salarios-promedios-mas-altos" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;job_title&#39;</span><span class="p">)[</span><span class="s1">&#39;salary_in_usd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>job_title
Research Team Lead                450000.0
IT Enterprise Data Architect      284090.0
Head of Applied AI                281500.0
AIRS Solutions Specialist         263250.0
Director of Product Management    260000.0
Commercial Counsel                250000.0
Head of Machine Learning          250000.0
Name: salary_in_usd, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;job_title&#39;</span><span class="p">)[</span><span class="s1">&#39;salary_in_usd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">median</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Job Title&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Salary in USD&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Median Salary by Job Title&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/1746ef4824a8f7a4f455d22ef302695a0711e033981768930f7e973d61e27abd.png" src="_images/1746ef4824a8f7a4f455d22ef302695a0711e033981768930f7e973d61e27abd.png" />
</div>
</div>
<p>Nos confirma que los puestos de liderazgo y gestión en ciencia de datos, analítica e inteligencia artificial son los que concentran los salarios más altos.</p>
</section>
</section>
<section id="los-titulos-de-trabajo-mas-comunes">
<h3>Los títulos de trabajo más comunes<a class="headerlink" href="#los-titulos-de-trabajo-mas-comunes" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;job_title&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>job_title
Software Engineer    9191
Data Scientist       7358
Engineer             6986
Data Engineer        6974
Data Analyst         6499
Manager              5359
Analyst              4005
Name: count, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">df</span><span class="p">[</span><span class="s1">&#39;job_title&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="o">.</span><span class="n">sort_values</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">barh</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Job Title&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Number of Job Title&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Number of Common Job Title&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/db4ea3b9e43be91850a680dd8511e34864904109dfbf57042632169ae0573eab.png" src="_images/db4ea3b9e43be91850a680dd8511e34864904109dfbf57042632169ae0573eab.png" />
</div>
</div>
<p>Los roles más comunes están relacionados con ciencia de datos, ingeniería de software y análisis de datos, siendo Data Scientist el más frecuente</p>
</section>
<section id="impacto-del-trabajo-remoto-en-el-salario">
<h3>Impacto del trabajo remoto en el salario<a class="headerlink" href="#impacto-del-trabajo-remoto-en-el-salario" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;remote_ratio&#39;</span><span class="p">)[</span><span class="s1">&#39;salary_in_usd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>remote_ratio
0      157946.549512
50      80514.675000
100    153569.038625
Name: salary_in_usd, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">remote_salary</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;remote_ratio&#39;</span><span class="p">)[</span><span class="s1">&#39;salary_in_usd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">remote_salary</span> <span class="o">=</span> <span class="n">remote_salary</span><span class="o">.</span><span class="n">rename</span><span class="p">({</span>
    <span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;On-site&#39;</span><span class="p">,</span>
    <span class="mi">50</span><span class="p">:</span> <span class="s1">&#39;Hybrid&#39;</span><span class="p">,</span>
    <span class="mi">100</span><span class="p">:</span> <span class="s1">&#39;Fully Remote&#39;</span>
<span class="p">})</span>
<span class="nb">print</span><span class="p">(</span><span class="n">remote_salary</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>remote_ratio
On-site         157946.549512
Hybrid           80514.675000
Fully Remote    153569.038625
Name: salary_in_usd, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="n">remote_salary</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Remote Ratio&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Salary in USD&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Salaries by Remote Ratio&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/1cee12fcb6bd2124b822ada9b4b155277377503d07164ceae1e3ffb8156e3b52.png" src="_images/1cee12fcb6bd2124b822ada9b4b155277377503d07164ceae1e3ffb8156e3b52.png" />
</div>
</div>
<p>los trabajos totalmente presenciales (On-site) y completamente remotos (Fully Remote) tienen salarios promedio más altos, mientras que los puestos híbridos (Hybrid) presentan un salario promedio significativamente menor.</p>
</section>
<section id="influencia-del-tamano-de-la-empresa-en-el-salario">
<h3>Influencia del tamaño de la empresa en el salario<a class="headerlink" href="#influencia-del-tamano-de-la-empresa-en-el-salario" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;company_size&#39;</span><span class="p">)[</span><span class="s1">&#39;salary_in_usd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>company_size
L    168145.897184
M    156807.909858
S     87188.400000
Name: salary_in_usd, dtype: float64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;company_size&#39;</span><span class="p">)[</span><span class="s1">&#39;salary_in_usd&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Company Size&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Salary in USD&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Salaries by Company Size&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/8ff46f95979f6a67c671102257f3662a2f6edcad82a1e15ebc4e69748ce371f9.png" src="_images/8ff46f95979f6a67c671102257f3662a2f6edcad82a1e15ebc4e69748ce371f9.png" />
</div>
</div>
<p>Se observa que las empresas grandes (L) y medianas (M) ofrecen salarios promedio significativamente más altos que las pequeñas (S).</p>
</section>
<section id="relacion-entre-el-tamano-de-la-empresa-y-la-contratacion-de-empleados-remotos">
<h3>Relación entre el tamaño de la empresa y la contratación de empleados remotos<a class="headerlink" href="#relacion-entre-el-tamano-de-la-empresa-y-la-contratacion-de-empleados-remotos" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;company_size&#39;</span><span class="p">)[</span><span class="s1">&#39;remote_ratio&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>company_size  remote_ratio
L             0                1443
              100                53
              50                 31
M             0               61266
              100             15916
              50                  7
S             100                 5
              0                   3
              50                  2
Name: count, dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="n">counts</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;company_size&#39;</span><span class="p">)[</span><span class="s1">&#39;remote_ratio&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span><span class="o">.</span><span class="n">unstack</span><span class="p">(</span><span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">counts</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s2">&quot;YlGnBu&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Company Size vs Remote Ratio (Count of Employees)&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Company Size&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Remote Ratio&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">9</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/c3e67bec24f27cf51142ffc1b4373e67dbfc5dc27c18318819311e9ba49f9916.png" src="_images/c3e67bec24f27cf51142ffc1b4373e67dbfc5dc27c18318819311e9ba49f9916.png" />
</div>
</div>
<p>Las empresas más grandes tienden a tener más empleados presenciales, mientras que las pequeñas muestran una proporción relativamente mayor de trabajadores totalmente remotos.</p>
<section id="matriz-de-correlacion">
<h4>Matriz de correlación<a class="headerlink" href="#matriz-de-correlacion" title="Link to this heading">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">corr</span><span class="p">(</span><span class="n">numeric_only</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;coolwarm&#39;</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;.2f&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Matriz de Correlación&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/17b2637ee5c6c2d197fd581ca972e2645ea01309233613fc0e01907f5fbedb4d.png" src="_images/17b2637ee5c6c2d197fd581ca972e2645ea01309233613fc0e01907f5fbedb4d.png" />
</div>
</div>
<p>La matriz de correlación muestra que salary y salary_in_usd están moderadamente relacionadas, mientras que remote_ratio y work_year presentan correlaciones bajas con las demás variables, lo que sugiere que no hay evidencia clara de que la modalidad de trabajo remoto o el año del registro influyan en el salario.</p>
</section>
</section>
</section>
<section id="split-train-test">
<h2>4. Split Train / Test<a class="headerlink" href="#split-train-test" title="Link to this heading">#</a></h2>
<p>Separamos el dataset en 3 subconjuntos:</p>
<ol class="arabic simple">
<li><p>Train (80%) → usado para entrenar los modelos.</p></li>
<li><p>Test (20%) → para evaluar el rendimiento final de los modelos.</p></li>
</ol>
<p>Esto evita sobreajuste y asegura una prueba justa al final.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># 80% Train, 20% Test</span>
<span class="n">X_train_reg</span><span class="p">,</span> <span class="n">X_test_reg</span><span class="p">,</span> <span class="n">y_train_reg</span><span class="p">,</span> <span class="n">y_test_reg</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span>
    <span class="n">X_full</span><span class="p">,</span> <span class="n">y_full_price</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="preprocesamiento">
<h2>5. Preprocesamiento<a class="headerlink" href="#preprocesamiento" title="Link to this heading">#</a></h2>
<p>Definimos un pipeline de transformación:</p>
<ol class="arabic simple">
<li><p>Categóricas → imputar valores faltantes + OneHotEncoding.</p></li>
<li><p>Numéricas → imputar valores faltantes + escalado.</p></li>
<li><p>3 ColumnTransformer.</p></li>
</ol>
<p>Así garantizamos que todos los modelos reciban datos ya limpios y escalados.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.preprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.preprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">RobustScaler</span>

<span class="n">categorical_transformer</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[</span>
    <span class="p">(</span><span class="s2">&quot;imputer&quot;</span><span class="p">,</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s2">&quot;most_frequent&quot;</span><span class="p">)),</span>
    <span class="p">(</span><span class="s2">&quot;encoder&quot;</span><span class="p">,</span> <span class="n">OneHotEncoder</span><span class="p">(</span><span class="n">handle_unknown</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">))</span>
<span class="p">])</span>

<span class="n">numeric_transformer_standard</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[</span>
    <span class="p">(</span><span class="s2">&quot;imputer&quot;</span><span class="p">,</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s2">&quot;median&quot;</span><span class="p">)),</span>
    <span class="p">(</span><span class="s2">&quot;scaler&quot;</span><span class="p">,</span> <span class="n">StandardScaler</span><span class="p">())</span>
<span class="p">])</span>

<span class="n">numeric_transformer_maxabs</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[</span>
    <span class="p">(</span><span class="s2">&quot;imputer&quot;</span><span class="p">,</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s2">&quot;median&quot;</span><span class="p">)),</span>
    <span class="p">(</span><span class="s2">&quot;scaler&quot;</span><span class="p">,</span> <span class="n">MaxAbsScaler</span><span class="p">())</span>
<span class="p">])</span>

<span class="n">numeric_transformer_robust</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[</span>
    <span class="p">(</span><span class="s2">&quot;imputer&quot;</span><span class="p">,</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s2">&quot;median&quot;</span><span class="p">)),</span>
    <span class="p">(</span><span class="s2">&quot;scaler&quot;</span><span class="p">,</span> <span class="n">RobustScaler</span><span class="p">())</span>
<span class="p">])</span>

<span class="n">preprocessor_standard</span> <span class="o">=</span> <span class="n">ColumnTransformer</span><span class="p">([</span>
    <span class="p">(</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="n">categorical_transformer</span><span class="p">,</span> <span class="n">categorical_features</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;num&quot;</span><span class="p">,</span> <span class="n">numeric_transformer_standard</span><span class="p">,</span> <span class="n">numeric_features</span><span class="p">)</span>
<span class="p">])</span>

<span class="n">preprocessor_maxabs</span> <span class="o">=</span> <span class="n">ColumnTransformer</span><span class="p">([</span>
    <span class="p">(</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="n">categorical_transformer</span><span class="p">,</span> <span class="n">categorical_features</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;num&quot;</span><span class="p">,</span> <span class="n">numeric_transformer_maxabs</span><span class="p">,</span> <span class="n">numeric_features</span><span class="p">)</span>
<span class="p">])</span>

<span class="n">preprocessor_robust</span> <span class="o">=</span> <span class="n">ColumnTransformer</span><span class="p">([</span>
    <span class="p">(</span><span class="s2">&quot;cat&quot;</span><span class="p">,</span> <span class="n">categorical_transformer</span><span class="p">,</span> <span class="n">categorical_features</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;num&quot;</span><span class="p">,</span> <span class="n">numeric_transformer_robust</span><span class="p">,</span> <span class="n">numeric_features</span><span class="p">)</span>
<span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="modelos-y-busqueda-de-hiperparametros">
<h2>6. Modelos y búsqueda de hiperparámetros<a class="headerlink" href="#modelos-y-busqueda-de-hiperparametros" title="Link to this heading">#</a></h2>
<p>Definimos 7 modelos: Ridge, Lasso, KNN, Árbol, SVR, XGBoost, MLP.</p>
<ol class="arabic simple">
<li><p>Configuramos sus hiperparámetros candidatos.</p></li>
<li><p>Usamos GridSearchCV (para búsquedas exhaustivas) y RandomizedSearchCV (para búsqueda aleatoria en rangos amplios).</p></li>
<li><p>Cada búsqueda usa validación cruzada (cv=3) dentro del conjunto de entrenamiento.</p></li>
</ol>
<p>Aquí encontramos la “mejor versión” de cada modelo.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ridge</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;preprocessor&quot;</span><span class="p">,</span> <span class="n">preprocessor_robust</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="n">Ridge</span><span class="p">())])</span>
<span class="n">lasso</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;preprocessor&quot;</span><span class="p">,</span> <span class="n">preprocessor_robust</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="n">Lasso</span><span class="p">())])</span>
<span class="n">knn</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;preprocessor&quot;</span><span class="p">,</span> <span class="n">preprocessor_standard</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="n">KNeighborsRegressor</span><span class="p">())])</span>
<span class="n">dtree</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;preprocessor&quot;</span><span class="p">,</span> <span class="n">preprocessor_standard</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="n">DecisionTreeRegressor</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">))])</span>
<span class="n">svr</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;preprocessor&quot;</span><span class="p">,</span> <span class="n">preprocessor_standard</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="n">SVR</span><span class="p">())])</span>
<span class="n">xgb</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;preprocessor&quot;</span><span class="p">,</span> <span class="n">preprocessor_maxabs</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="n">XGBRegressor</span><span class="p">(</span><span class="n">objective</span><span class="o">=</span><span class="s2">&quot;reg:squarederror&quot;</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">))])</span>
<span class="n">mlp</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">(</span><span class="n">steps</span><span class="o">=</span><span class="p">[(</span><span class="s2">&quot;preprocessor&quot;</span><span class="p">,</span> <span class="n">preprocessor_standard</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;model&quot;</span><span class="p">,</span> <span class="n">MLPRegressor</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">early_stopping</span><span class="o">=</span><span class="kc">True</span><span class="p">))])</span>

<span class="n">ridge_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;model__alpha&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">]}</span>
<span class="n">lasso_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;model__alpha&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.001</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mi">1</span><span class="p">]}</span>
<span class="n">knn_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;model__n_neighbors&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">]}</span>
<span class="n">dtree_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;model__max_depth&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="kc">None</span><span class="p">]}</span>
<span class="n">svr_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;model__C&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="s2">&quot;model__kernel&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;rbf&quot;</span><span class="p">,</span> <span class="s2">&quot;linear&quot;</span><span class="p">]}</span>
<span class="n">xgb_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;model__n_estimators&quot;</span><span class="p">:</span> <span class="n">randint</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">300</span><span class="p">),</span> <span class="s2">&quot;model__max_depth&quot;</span><span class="p">:</span> <span class="n">randint</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="s2">&quot;model__learning_rate&quot;</span><span class="p">:</span> <span class="n">uniform</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)}</span>
<span class="n">mlp_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;model__hidden_layer_sizes&quot;</span><span class="p">:</span> <span class="p">[(</span><span class="mi">50</span><span class="p">,),</span> <span class="p">(</span><span class="mi">100</span><span class="p">,),</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">)],</span><span class="s2">&quot;model__alpha&quot;</span><span class="p">:</span> <span class="n">uniform</span><span class="p">(</span><span class="mf">0.0001</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">),</span><span class="s2">&quot;model__activation&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;relu&quot;</span><span class="p">,</span> <span class="s2">&quot;tanh&quot;</span><span class="p">]}</span>

<span class="n">ridge_search</span> <span class="o">=</span> <span class="n">GridSearchCV</span><span class="p">(</span><span class="n">ridge</span><span class="p">,</span> <span class="n">ridge_params</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="s2">&quot;neg_mean_squared_error&quot;</span><span class="p">)</span>
<span class="n">lasso_search</span> <span class="o">=</span> <span class="n">GridSearchCV</span><span class="p">(</span><span class="n">lasso</span><span class="p">,</span> <span class="n">lasso_params</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="s2">&quot;neg_mean_squared_error&quot;</span><span class="p">)</span>
<span class="n">knn_search</span> <span class="o">=</span> <span class="n">GridSearchCV</span><span class="p">(</span><span class="n">knn</span><span class="p">,</span> <span class="n">knn_params</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="s2">&quot;neg_mean_squared_error&quot;</span><span class="p">)</span>
<span class="n">dtree_search</span> <span class="o">=</span> <span class="n">GridSearchCV</span><span class="p">(</span><span class="n">dtree</span><span class="p">,</span> <span class="n">dtree_params</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="s2">&quot;neg_mean_squared_error&quot;</span><span class="p">)</span>
<span class="n">svr_search</span> <span class="o">=</span> <span class="n">GridSearchCV</span><span class="p">(</span><span class="n">svr</span><span class="p">,</span> <span class="n">svr_params</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="s2">&quot;neg_mean_squared_error&quot;</span><span class="p">)</span>
<span class="n">xgb_search</span> <span class="o">=</span> <span class="n">RandomizedSearchCV</span><span class="p">(</span><span class="n">xgb</span><span class="p">,</span> <span class="n">xgb_params</span><span class="p">,</span> <span class="n">n_iter</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="s2">&quot;neg_mean_squared_error&quot;</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">mlp_search</span> <span class="o">=</span> <span class="n">RandomizedSearchCV</span><span class="p">(</span><span class="n">mlp</span><span class="p">,</span> <span class="n">mlp_params</span><span class="p">,</span> <span class="n">n_iter</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="s2">&quot;neg_mean_squared_error&quot;</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>

<span class="k">for</span> <span class="n">search</span> <span class="ow">in</span> <span class="p">[</span><span class="n">ridge_search</span><span class="p">,</span> <span class="n">lasso_search</span><span class="p">,</span> <span class="n">knn_search</span><span class="p">,</span> <span class="n">dtree_search</span><span class="p">,</span> <span class="n">svr_search</span><span class="p">,</span> <span class="n">xgb_search</span><span class="p">,</span> <span class="n">mlp_search</span><span class="p">]:</span>
    <span class="n">search</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train_reg</span><span class="p">,</span> <span class="n">y_train_reg</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="funciones-auxiliares">
<h2>7. Funciones auxiliares<a class="headerlink" href="#funciones-auxiliares" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>evaluate_model → calcula métricas (MAE, MSE, RMSE, MAPE) para Train/Val/Test.</p></li>
<li><p>bds_test → aplica el BDS Test para verificar si los residuos son independientes (ruido blanco).</p></li>
<li><p>plot_predictions → gráfico real vs predicho para visualizar qué tan bien ajusta cada modelo.</p></li>
</ol>
<p>Son funciones de apoyo para evitar repetir código.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">evaluate_model</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">model</span><span class="p">,</span> <span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span><span class="p">):</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">split</span><span class="p">,</span> <span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="ow">in</span> <span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;Train&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)),</span>
        <span class="p">(</span><span class="s2">&quot;Test&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">X_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">))</span>
    <span class="p">]:</span>
        <span class="n">y_pred</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
        <span class="n">mae</span> <span class="o">=</span> <span class="n">mean_absolute_error</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
        <span class="n">mse</span> <span class="o">=</span> <span class="n">mean_squared_error</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
        <span class="n">rmse</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">mse</span><span class="p">)</span>
        <span class="n">mape</span> <span class="o">=</span> <span class="n">mean_absolute_percentage_error</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>
        <span class="n">results</span><span class="p">[(</span><span class="n">name</span><span class="p">,</span> <span class="n">split</span><span class="p">)]</span> <span class="o">=</span> <span class="p">[</span><span class="n">mae</span><span class="p">,</span> <span class="n">mse</span><span class="p">,</span> <span class="n">rmse</span><span class="p">,</span> <span class="n">mape</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">results</span>

<span class="c1">#BDS Test</span>

<span class="k">def</span><span class="w"> </span><span class="nf">bds_test</span><span class="p">(</span><span class="n">y_true</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">):</span>
    <span class="n">residuals</span> <span class="o">=</span> <span class="n">y_true</span> <span class="o">-</span> <span class="n">y_pred</span>
    <span class="n">bds_result</span> <span class="o">=</span> <span class="n">BDS</span><span class="p">(</span><span class="n">residuals</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">bds_result</span><span class="o">.</span><span class="n">stat</span><span class="p">,</span> <span class="n">bds_result</span><span class="o">.</span><span class="n">pvalue</span>

<span class="c1">#Gráfico Real vs Predicho</span>

<span class="k">def</span><span class="w"> </span><span class="nf">plot_predictions</span><span class="p">(</span><span class="n">y_true</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">y_true</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">max_val</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">y_true</span><span class="o">.</span><span class="n">max</span><span class="p">(),</span> <span class="n">y_pred</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
    <span class="n">min_val</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">y_true</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span> <span class="n">y_pred</span><span class="o">.</span><span class="n">min</span><span class="p">())</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">],</span> <span class="p">[</span><span class="n">min_val</span><span class="p">,</span> <span class="n">max_val</span><span class="p">],</span> <span class="s1">&#39;r--&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Perfect Fit&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Real&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Predicho&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="loop-para-evaluar-modelos-graficas-bds">
<h2>8. Loop para evaluar modelos + gráficas + BDS<a class="headerlink" href="#loop-para-evaluar-modelos-graficas-bds" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Iteramos por cada modelo entrenado.</p></li>
<li><p>Guardamos sus métricas en Train/Val/Test.</p></li>
<li><p>Aplicamos el BDS Test en el conjunto de Test (para independencia de residuos).</p></li>
<li><p>Generamos gráficos comparativos (Real vs Predicho) en cada conjunto.</p></li>
</ol>
<p>Aquí ocurre la evaluación central.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">statsmodels.tsa.stattools</span><span class="w"> </span><span class="kn">import</span> <span class="n">bds</span>

<span class="c1"># ----------------------------</span>
<span class="c1"># Función para ejecutar el BDS Test usando statsmodels</span>
<span class="c1"># ----------------------------</span>
<span class="k">def</span><span class="w"> </span><span class="nf">bds_test</span><span class="p">(</span><span class="n">y_true</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">,</span> <span class="n">max_dim</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">epsilon</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="mf">1.5</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Aplica el test BDS (Brock-Dechert-Scheinkman) a los residuos del modelo usando statsmodels.</span>

<span class="sd">    Parámetros:</span>
<span class="sd">        y_true (array-like): Valores reales.</span>
<span class="sd">        y_pred (array-like): Predicciones.</span>
<span class="sd">        max_dim (int): Dimensión máxima de embedding (por defecto 2).</span>
<span class="sd">        epsilon (float|None): Umbral de distancia; si es None, se calcula automáticamente.</span>
<span class="sd">        distance (float): Multiplicador para calcular epsilon si este es None.</span>

<span class="sd">    Retorna:</span>
<span class="sd">        stat (float): Estadístico del test.</span>
<span class="sd">        pvalue (float): Valor p.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">residuals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y_true</span><span class="p">)</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y_pred</span><span class="p">)</span>
    <span class="n">residuals</span> <span class="o">=</span> <span class="n">residuals</span><span class="p">[</span><span class="o">~</span><span class="n">np</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">residuals</span><span class="p">)]</span>  <span class="c1"># Elimina NaNs</span>
    
    <span class="n">stat</span><span class="p">,</span> <span class="n">pvalue</span> <span class="o">=</span> <span class="n">bds</span><span class="p">(</span><span class="n">residuals</span><span class="p">,</span> <span class="n">max_dim</span><span class="o">=</span><span class="n">max_dim</span><span class="p">,</span> <span class="n">epsilon</span><span class="o">=</span><span class="n">epsilon</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="n">distance</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">stat</span><span class="p">,</span> <span class="n">pvalue</span>

<span class="c1"># ----------------------------</span>
<span class="c1"># Diccionarios para almacenar resultados</span>
<span class="c1"># ----------------------------</span>
<span class="n">results</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">bds_results</span> <span class="o">=</span> <span class="p">{}</span>

<span class="c1"># ----------------------------</span>
<span class="c1"># Loop sobre modelos</span>
<span class="c1"># ----------------------------</span>
<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">search</span> <span class="ow">in</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">&quot;Ridge&quot;</span><span class="p">,</span> <span class="n">ridge_search</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;Lasso&quot;</span><span class="p">,</span> <span class="n">lasso_search</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;KNN&quot;</span><span class="p">,</span> <span class="n">knn_search</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;DecisionTree&quot;</span><span class="p">,</span> <span class="n">dtree_search</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;SVR&quot;</span><span class="p">,</span> <span class="n">svr_search</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;XGB&quot;</span><span class="p">,</span> <span class="n">xgb_search</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;MLP&quot;</span><span class="p">,</span> <span class="n">mlp_search</span><span class="p">)</span>
<span class="p">]:</span>
    <span class="n">best_model</span> <span class="o">=</span> <span class="n">search</span><span class="o">.</span><span class="n">best_estimator_</span>
    
    <span class="c1"># Métricas del modelo</span>
    <span class="n">metrics</span> <span class="o">=</span> <span class="n">evaluate_model</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">best_model</span><span class="p">,</span> <span class="n">X_train_reg</span><span class="p">,</span> <span class="n">X_test_reg</span><span class="p">,</span>
                              <span class="n">y_train_reg</span><span class="p">,</span> <span class="n">y_test_reg</span><span class="p">)</span>
    <span class="n">results</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">metrics</span><span class="p">)</span>
    
    <span class="c1"># Test BDS en TEST</span>
    <span class="n">y_test_pred</span> <span class="o">=</span> <span class="n">best_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_reg</span><span class="p">)</span>
    <span class="n">stat</span><span class="p">,</span> <span class="n">pvalue</span> <span class="o">=</span> <span class="n">bds_test</span><span class="p">(</span><span class="n">y_test_reg</span><span class="p">,</span> <span class="n">y_test_pred</span><span class="p">)</span>
    <span class="n">bds_results</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">stat</span><span class="p">,</span> <span class="n">pvalue</span><span class="p">)</span>
    
    <span class="c1"># Gráficos de predicción</span>
    <span class="n">plot_predictions</span><span class="p">(</span><span class="n">y_train_reg</span><span class="p">,</span> <span class="n">best_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_train_reg</span><span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> – Train&quot;</span><span class="p">)</span>
    <span class="n">plot_predictions</span><span class="p">(</span><span class="n">y_test_reg</span><span class="p">,</span> <span class="n">y_test_pred</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> – Test&quot;</span><span class="p">)</span>

<span class="c1"># ----------------------------</span>
<span class="c1"># Crear DataFrame con resultados BDS</span>
<span class="c1"># ----------------------------</span>
<span class="n">bds_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">bds_results</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;BDS_Stat&quot;</span><span class="p">,</span> <span class="s2">&quot;p_value&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">T</span>
<span class="n">bds_df</span><span class="p">[</span><span class="s2">&quot;Interpretación&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span>
    <span class="n">bds_df</span><span class="p">[</span><span class="s2">&quot;p_value&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.05</span><span class="p">,</span>
    <span class="s2">&quot;Residuos independientes (i.i.d.)&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Dependencia no lineal&quot;</span>
<span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Resultados del Test BDS:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">bds_df</span><span class="p">)</span>

<span class="c1"># ----------------------------</span>
<span class="c1"># Gráfico comparativo de p-values</span>
<span class="c1"># ----------------------------</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">bds_df</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">bds_df</span><span class="p">[</span><span class="s2">&quot;p_value&quot;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;red&quot;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s2">&quot;--&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;α = 0.05&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;p-values del Test BDS por Modelo&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;p-value&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/f90019f0d615ee59362ceac366115c3cc5772191b44c024ab673369cc8406293.png" src="_images/f90019f0d615ee59362ceac366115c3cc5772191b44c024ab673369cc8406293.png" />
<img alt="_images/2ca0eaecc1be0ea357f9b9c03ba1f5d67bed1c70761d0d8a12e87af528a524c1.png" src="_images/2ca0eaecc1be0ea357f9b9c03ba1f5d67bed1c70761d0d8a12e87af528a524c1.png" />
<img alt="_images/abdcdd2a08aa60b9f8ddd26754efd2018e846f65d8faeb4100eb0cb2390ba05e.png" src="_images/abdcdd2a08aa60b9f8ddd26754efd2018e846f65d8faeb4100eb0cb2390ba05e.png" />
<img alt="_images/4b35ccc2c160e20f5c369fad5d4415f0a3e271f40d54a749acae38c1093b946d.png" src="_images/4b35ccc2c160e20f5c369fad5d4415f0a3e271f40d54a749acae38c1093b946d.png" />
<img alt="_images/c11ea468cdb81353dc83588c6dc107c4dd821d46b87f2c053d50d8f5b5b213e2.png" src="_images/c11ea468cdb81353dc83588c6dc107c4dd821d46b87f2c053d50d8f5b5b213e2.png" />
<img alt="_images/98c4e1f43a4bc5adb803265f051f0b38098267ce5c986c20617135fa3104b3df.png" src="_images/98c4e1f43a4bc5adb803265f051f0b38098267ce5c986c20617135fa3104b3df.png" />
<img alt="_images/b4a454a85cc3820b72f22844e28fb9f24378e9f239b2e83439bb8bfd700ef29c.png" src="_images/b4a454a85cc3820b72f22844e28fb9f24378e9f239b2e83439bb8bfd700ef29c.png" />
<img alt="_images/4fa09669124982766dbc2b9a7ef67e2ffd5540705056922d0db7d43c86811e2c.png" src="_images/4fa09669124982766dbc2b9a7ef67e2ffd5540705056922d0db7d43c86811e2c.png" />
<img alt="_images/8019c995fd64e19ce0e23d216344371c81cbb949b36fb2705d01053bcb550efb.png" src="_images/8019c995fd64e19ce0e23d216344371c81cbb949b36fb2705d01053bcb550efb.png" />
<img alt="_images/e755bbff815496bd42dd0742a4362430201dacc9c1214f866dc03eb196929502.png" src="_images/e755bbff815496bd42dd0742a4362430201dacc9c1214f866dc03eb196929502.png" />
<img alt="_images/8cf1801aa43070ba4ca7cc21be520d0b80ed14880b808235ab34c38affeda6f5.png" src="_images/8cf1801aa43070ba4ca7cc21be520d0b80ed14880b808235ab34c38affeda6f5.png" />
<img alt="_images/77739006f3b251739861b6375538e5aac7be8b12b6d690531fd4492ebd00fb1c.png" src="_images/77739006f3b251739861b6375538e5aac7be8b12b6d690531fd4492ebd00fb1c.png" />
<img alt="_images/ea34b5b20efa25e18b73acad74fc6a6ed65c6aa9a791dd6ba5b9bc60c3764a6b.png" src="_images/ea34b5b20efa25e18b73acad74fc6a6ed65c6aa9a791dd6ba5b9bc60c3764a6b.png" />
<img alt="_images/a7e6536989f5edc2bd85e58bcd880e176bb8cc7767a7f6925b5e4c523ea7aca7.png" src="_images/a7e6536989f5edc2bd85e58bcd880e176bb8cc7767a7f6925b5e4c523ea7aca7.png" />
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Resultados del Test BDS:
                          BDS_Stat                 p_value  \
Ridge           3.5657840740128517  0.00036276997026370915   
Lasso           -1.360849514752762     0.17356125057356198   
KNN             1.5768927979328395     0.11482019399817797   
DecisionTree  -0.29914141931648647      0.7648321443146662   
SVR           -0.22392850855768537      0.8228129323318437   
XGB            -0.2229877786135616      0.8235450183012233   
MLP             1.1086056336167411     0.26760034675194366   

                                Interpretación  
Ridge                    Dependencia no lineal  
Lasso         Residuos independientes (i.i.d.)  
KNN           Residuos independientes (i.i.d.)  
DecisionTree  Residuos independientes (i.i.d.)  
SVR           Residuos independientes (i.i.d.)  
XGB           Residuos independientes (i.i.d.)  
MLP           Residuos independientes (i.i.d.)  
</pre></div>
</div>
<img alt="_images/f96598a4c991735ae03e10294f6af6014afdd3b630960171114a0db6e2e280f5.png" src="_images/f96598a4c991735ae03e10294f6af6014afdd3b630960171114a0db6e2e280f5.png" />
</div>
</div>
<p><strong>Ridge</strong>
p-value = 0.00036 (muy bajo) → rechazamos H₀ de independencia de residuos → hay dependencia no lineal.
Significa que la relación lineal no captura toda la estructura.</p>
<p><strong>Lasso</strong>
p-value = 0.17 (alto) → no rechazamos H₀ → residuos parecen independientes (bueno).
Esto indica que Lasso se ajustó bien con las variables disponibles.</p>
<p><strong>DecisionTree</strong>
p-value = 0.76 (muy alto) → residuos parecen aleatorios (bueno).
Pero esto no significa que no haya sobreajuste: solo indica que el árbol capturó casi toda la estructura del Train (y probablemente sobreajustó).</p>
</section>
<section id="dataframe-de-resultados-y-grafico-comparativo">
<h2>9. DataFrame de resultados y gráfico comparativo<a class="headerlink" href="#dataframe-de-resultados-y-grafico-comparativo" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Construimos un DataFrame con todas las métricas por modelo y dataset.</p></li>
<li><p>Mostramos resultados del BDS Test.</p></li>
<li><p>Hacemos un gráfico de barras comparativo de RMSE (Test) entre modelos.</p></li>
</ol>
<p>Con esto tenemos un resumen visual y tabular para comparar rendimientos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">df_results</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">([</span>
    <span class="p">{</span><span class="s2">&quot;Modelo&quot;</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span> <span class="s2">&quot;Dataset&quot;</span><span class="p">:</span> <span class="n">split</span><span class="p">,</span> <span class="s2">&quot;MAE&quot;</span><span class="p">:</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;MSE&quot;</span><span class="p">:</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;RMSE&quot;</span><span class="p">:</span> <span class="n">m</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;MAPE (%)&quot;</span><span class="p">:</span> <span class="n">m</span><span class="p">[</span><span class="mi">3</span><span class="p">]}</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">split</span><span class="p">),</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">results</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">=== Resultados BDS (Test) ===&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">model</span><span class="p">,</span> <span class="p">(</span><span class="n">stat</span><span class="p">,</span> <span class="n">pval</span><span class="p">)</span> <span class="ow">in</span> <span class="n">bds_results</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">model</span><span class="si">}</span><span class="s2">: BDS Stat=</span><span class="si">{</span><span class="n">stat</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">, p-value=</span><span class="si">{</span><span class="n">pval</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Filtrar solo Test</span>
<span class="n">df_test</span> <span class="o">=</span> <span class="n">df_results</span><span class="p">[</span><span class="n">df_results</span><span class="p">[</span><span class="s2">&quot;Dataset&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Test&quot;</span><span class="p">]</span>

<span class="c1"># Gráfico comparativo RMSE (Test)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">df_test</span><span class="p">[</span><span class="s2">&quot;Modelo&quot;</span><span class="p">],</span> <span class="n">df_test</span><span class="p">[</span><span class="s2">&quot;RMSE&quot;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;skyblue&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Comparación de RMSE (Test)&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;RMSE&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>=== Resultados BDS (Test) ===
Ridge: BDS Stat=3.566, p-value=0.000
Lasso: BDS Stat=-1.361, p-value=0.174
KNN: BDS Stat=1.577, p-value=0.115
DecisionTree: BDS Stat=-0.299, p-value=0.765
SVR: BDS Stat=-0.224, p-value=0.823
XGB: BDS Stat=-0.223, p-value=0.824
MLP: BDS Stat=1.109, p-value=0.268
</pre></div>
</div>
<img alt="_images/8357518e65d10851e246b74fc731d33ccb9795d82f1d168196cace60ef344ef5.png" src="_images/8357518e65d10851e246b74fc731d33ccb9795d82f1d168196cace60ef344ef5.png" />
</div>
</div>
<p><strong>Ridge y Lasso:</strong> RMSE muy bajo → modelos lineales están funcionando extremadamente bien.</p>
<p><strong>DecisionTree:</strong> también bajo, aunque ligeramente mayor que Ridge y Lasso.</p>
<p><strong>KNN:</strong> RMSE altísimo → completamente inadecuado para este problema (descartarlo).</p>
<p><strong>SVR, XGB, MLP:</strong> errores enormes comparados con Ridge y Lasso.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.metrics</span><span class="w"> </span><span class="kn">import</span> <span class="n">mean_absolute_error</span><span class="p">,</span> <span class="n">mean_squared_error</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">statsmodels.tsa.stattools</span><span class="w"> </span><span class="kn">import</span> <span class="n">bds</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>


<span class="c1"># Función para métricas de regresión</span>

<span class="k">def</span><span class="w"> </span><span class="nf">regression_metrics</span><span class="p">(</span><span class="n">y_true</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calcula métricas de regresión: MAE, MSE, RMSE, MAPE.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">y_true</span><span class="p">,</span> <span class="n">y_pred</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y_true</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y_pred</span><span class="p">)</span>
    <span class="n">mae</span> <span class="o">=</span> <span class="n">mean_absolute_error</span><span class="p">(</span><span class="n">y_true</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">mse</span> <span class="o">=</span> <span class="n">mean_squared_error</span><span class="p">(</span><span class="n">y_true</span><span class="p">,</span> <span class="n">y_pred</span><span class="p">)</span>
    <span class="n">rmse</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">mse</span><span class="p">)</span>
    <span class="n">mape</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">((</span><span class="n">y_true</span> <span class="o">-</span> <span class="n">y_pred</span><span class="p">)</span> <span class="o">/</span> <span class="n">y_true</span><span class="p">))</span> <span class="o">*</span> <span class="mi">100</span>
    <span class="k">return</span> <span class="n">mae</span><span class="p">,</span> <span class="n">mse</span><span class="p">,</span> <span class="n">rmse</span><span class="p">,</span> <span class="n">mape</span>


<span class="c1"># Inicializar lista de resultados</span>

<span class="n">results_table</span> <span class="o">=</span> <span class="p">[]</span>


<span class="c1"># Loop sobre modelos</span>

<span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">search</span> <span class="ow">in</span> <span class="p">[</span>
    <span class="p">(</span><span class="s2">&quot;Ridge&quot;</span><span class="p">,</span> <span class="n">ridge_search</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;Lasso&quot;</span><span class="p">,</span> <span class="n">lasso_search</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;KNN&quot;</span><span class="p">,</span> <span class="n">knn_search</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;DecisionTree&quot;</span><span class="p">,</span> <span class="n">dtree_search</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;SVR&quot;</span><span class="p">,</span> <span class="n">svr_search</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;XGB&quot;</span><span class="p">,</span> <span class="n">xgb_search</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;MLP&quot;</span><span class="p">,</span> <span class="n">mlp_search</span><span class="p">)</span>
<span class="p">]:</span>
    <span class="n">best_model</span> <span class="o">=</span> <span class="n">search</span><span class="o">.</span><span class="n">best_estimator_</span>
    
    <span class="c1"># Predicciones</span>
    <span class="n">y_train_pred</span> <span class="o">=</span> <span class="n">best_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_train_reg</span><span class="p">)</span>
    <span class="n">y_test_pred</span> <span class="o">=</span> <span class="n">best_model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test_reg</span><span class="p">)</span>
    
    <span class="c1"># Métricas</span>
    <span class="n">train_metrics</span> <span class="o">=</span> <span class="n">regression_metrics</span><span class="p">(</span><span class="n">y_train_reg</span><span class="p">,</span> <span class="n">y_train_pred</span><span class="p">)</span>
    <span class="n">test_metrics</span>  <span class="o">=</span> <span class="n">regression_metrics</span><span class="p">(</span><span class="n">y_test_reg</span><span class="p">,</span> <span class="n">y_test_pred</span><span class="p">)</span>
    
    <span class="c1"># Test BDS sobre residuos</span>
    <span class="n">residuals</span> <span class="o">=</span> <span class="n">y_test_reg</span> <span class="o">-</span> <span class="n">y_test_pred</span>
    <span class="n">bds_result</span> <span class="o">=</span> <span class="n">bds</span><span class="p">(</span><span class="n">residuals</span><span class="p">,</span> <span class="n">max_dim</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
    <span class="n">bds_pvalues</span> <span class="o">=</span> <span class="n">bds_result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># array de p-valores dim 2–6</span>
    
    <span class="c1"># Guardar resultados</span>
    <span class="n">results_table</span><span class="o">.</span><span class="n">append</span><span class="p">([</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="o">*</span><span class="n">train_metrics</span><span class="p">,</span>
        <span class="o">*</span><span class="n">test_metrics</span><span class="p">,</span>
        <span class="o">*</span><span class="n">bds_pvalues</span>
    <span class="p">])</span>


<span class="n">columns</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">MultiIndex</span><span class="o">.</span><span class="n">from_tuples</span><span class="p">([</span>
    <span class="p">(</span><span class="s2">&quot;Modelo&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;Train&quot;</span><span class="p">,</span> <span class="s2">&quot;MAE&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;Train&quot;</span><span class="p">,</span> <span class="s2">&quot;MSE&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;Train&quot;</span><span class="p">,</span> <span class="s2">&quot;RMSE&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;Train&quot;</span><span class="p">,</span> <span class="s2">&quot;MAPE&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;Test&quot;</span><span class="p">,</span> <span class="s2">&quot;MAE&quot;</span><span class="p">),</span>  <span class="p">(</span><span class="s2">&quot;Test&quot;</span><span class="p">,</span> <span class="s2">&quot;MSE&quot;</span><span class="p">),</span>  <span class="p">(</span><span class="s2">&quot;Test&quot;</span><span class="p">,</span> <span class="s2">&quot;RMSE&quot;</span><span class="p">),</span>  <span class="p">(</span><span class="s2">&quot;Test&quot;</span><span class="p">,</span> <span class="s2">&quot;MAPE&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;BDS p-value&quot;</span><span class="p">,</span> <span class="s2">&quot;dim2&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;BDS p-value&quot;</span><span class="p">,</span> <span class="s2">&quot;dim3&quot;</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">&quot;BDS p-value&quot;</span><span class="p">,</span> <span class="s2">&quot;dim4&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;BDS p-value&quot;</span><span class="p">,</span> <span class="s2">&quot;dim5&quot;</span><span class="p">),</span> <span class="p">(</span><span class="s2">&quot;BDS p-value&quot;</span><span class="p">,</span> <span class="s2">&quot;dim6&quot;</span><span class="p">)</span>
<span class="p">])</span>


<span class="n">results_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">results_table</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">columns</span><span class="p">)</span>

<span class="c1"># Ordenar columnas para evitar UnsortedIndexError</span>
<span class="n">results_df</span> <span class="o">=</span> <span class="n">results_df</span><span class="o">.</span><span class="n">sort_index</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>


<span class="k">def</span><span class="w"> </span><span class="nf">highlight_best</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;min&quot;</span><span class="p">):</span>
    <span class="n">is_best</span> <span class="o">=</span> <span class="n">s</span> <span class="o">==</span> <span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">min</span><span class="p">()</span> <span class="k">if</span> <span class="n">metric</span> <span class="o">==</span> <span class="s2">&quot;min&quot;</span> <span class="k">else</span> <span class="n">s</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;background-color: #c6efce; color: #006100&#39;</span> <span class="k">if</span> <span class="n">v</span> <span class="k">else</span> <span class="s1">&#39;&#39;</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">is_best</span><span class="p">]</span>

<span class="c1"># Columnas por bloque</span>
<span class="n">train_cols</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;Train&quot;</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;MAE&quot;</span><span class="p">,</span> <span class="s2">&quot;MSE&quot;</span><span class="p">,</span> <span class="s2">&quot;RMSE&quot;</span><span class="p">,</span> <span class="s2">&quot;MAPE&quot;</span><span class="p">]]</span>
<span class="n">test_cols</span>  <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;Test&quot;</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;MAE&quot;</span><span class="p">,</span> <span class="s2">&quot;MSE&quot;</span><span class="p">,</span> <span class="s2">&quot;RMSE&quot;</span><span class="p">,</span> <span class="s2">&quot;MAPE&quot;</span><span class="p">]]</span>

<span class="n">styled_df</span> <span class="o">=</span> <span class="p">(</span><span class="n">results_df</span><span class="o">.</span><span class="n">style</span>
    <span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">highlight_best</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="n">train_cols</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;min&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">highlight_best</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="n">test_cols</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s2">&quot;min&quot;</span><span class="p">)</span>
    <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">{:.4f}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">subset</span><span class="o">=</span><span class="n">train_cols</span> <span class="o">+</span> <span class="n">test_cols</span><span class="p">)</span>
    <span class="o">.</span><span class="n">set_table_styles</span><span class="p">([</span>
        <span class="p">{</span><span class="s1">&#39;selector&#39;</span><span class="p">:</span> <span class="s1">&#39;th&#39;</span><span class="p">,</span> <span class="s1">&#39;props&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;font-size&#39;</span><span class="p">,</span> <span class="s1">&#39;11pt&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;text-align&#39;</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span><span class="p">)]},</span>
        <span class="p">{</span><span class="s1">&#39;selector&#39;</span><span class="p">:</span> <span class="s1">&#39;td&#39;</span><span class="p">,</span> <span class="s1">&#39;props&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;text-align&#39;</span><span class="p">,</span> <span class="s1">&#39;center&#39;</span><span class="p">)]}</span>
    <span class="p">])</span>
<span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">styled_df</span><span class="p">)</span>

<span class="c1"># Exportar a Excel</span>
<span class="n">results_df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;_&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">col</span> <span class="k">if</span> <span class="n">c</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)</span> <span class="k">else</span> <span class="n">col</span>
    <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">results_df</span><span class="o">.</span><span class="n">columns</span>
<span class="p">]</span>

<span class="n">results_df</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="s2">&quot;resultados_modelos.xlsx&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_c16e5 th {
  font-size: 11pt;
  text-align: center;
}
#T_c16e5 td {
  text-align: center;
}
#T_c16e5_row1_col6, #T_c16e5_row1_col7, #T_c16e5_row1_col8, #T_c16e5_row1_col9, #T_c16e5_row3_col10, #T_c16e5_row3_col11, #T_c16e5_row3_col12, #T_c16e5_row3_col13 {
  background-color: #c6efce;
  color: #006100;
}
</style>
<table id="T_c16e5">
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_c16e5_level0_col0" class="col_heading level0 col0" colspan="5">BDS p-value</th>
      <th id="T_c16e5_level0_col5" class="col_heading level0 col5" >Modelo</th>
      <th id="T_c16e5_level0_col6" class="col_heading level0 col6" colspan="4">Test</th>
      <th id="T_c16e5_level0_col10" class="col_heading level0 col10" colspan="4">Train</th>
    </tr>
    <tr>
      <th class="blank level1" >&nbsp;</th>
      <th id="T_c16e5_level1_col0" class="col_heading level1 col0" >dim2</th>
      <th id="T_c16e5_level1_col1" class="col_heading level1 col1" >dim3</th>
      <th id="T_c16e5_level1_col2" class="col_heading level1 col2" >dim4</th>
      <th id="T_c16e5_level1_col3" class="col_heading level1 col3" >dim5</th>
      <th id="T_c16e5_level1_col4" class="col_heading level1 col4" >dim6</th>
      <th id="T_c16e5_level1_col5" class="col_heading level1 col5" ></th>
      <th id="T_c16e5_level1_col6" class="col_heading level1 col6" >MAE</th>
      <th id="T_c16e5_level1_col7" class="col_heading level1 col7" >MAPE</th>
      <th id="T_c16e5_level1_col8" class="col_heading level1 col8" >MSE</th>
      <th id="T_c16e5_level1_col9" class="col_heading level1 col9" >RMSE</th>
      <th id="T_c16e5_level1_col10" class="col_heading level1 col10" >MAE</th>
      <th id="T_c16e5_level1_col11" class="col_heading level1 col11" >MAPE</th>
      <th id="T_c16e5_level1_col12" class="col_heading level1 col12" >MSE</th>
      <th id="T_c16e5_level1_col13" class="col_heading level1 col13" >RMSE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_c16e5_level0_row0" class="row_heading level0 row0" >0</th>
      <td id="T_c16e5_row0_col0" class="data row0 col0" >0.000363</td>
      <td id="T_c16e5_row0_col1" class="data row0 col1" >0.002368</td>
      <td id="T_c16e5_row0_col2" class="data row0 col2" >0.009750</td>
      <td id="T_c16e5_row0_col3" class="data row0 col3" >0.034109</td>
      <td id="T_c16e5_row0_col4" class="data row0 col4" >0.056337</td>
      <td id="T_c16e5_row0_col5" class="data row0 col5" >Ridge</td>
      <td id="T_c16e5_row0_col6" class="data row0 col6" >44.6606</td>
      <td id="T_c16e5_row0_col7" class="data row0 col7" >0.0430</td>
      <td id="T_c16e5_row0_col8" class="data row0 col8" >5787.7932</td>
      <td id="T_c16e5_row0_col9" class="data row0 col9" >76.0775</td>
      <td id="T_c16e5_row0_col10" class="data row0 col10" >44.4758</td>
      <td id="T_c16e5_row0_col11" class="data row0 col11" >0.0406</td>
      <td id="T_c16e5_row0_col12" class="data row0 col12" >5823.8401</td>
      <td id="T_c16e5_row0_col13" class="data row0 col13" >76.3141</td>
    </tr>
    <tr>
      <th id="T_c16e5_level0_row1" class="row_heading level0 row1" >1</th>
      <td id="T_c16e5_row1_col0" class="data row1 col0" >0.173561</td>
      <td id="T_c16e5_row1_col1" class="data row1 col1" >0.360817</td>
      <td id="T_c16e5_row1_col2" class="data row1 col2" >0.551881</td>
      <td id="T_c16e5_row1_col3" class="data row1 col3" >0.714093</td>
      <td id="T_c16e5_row1_col4" class="data row1 col4" >0.847961</td>
      <td id="T_c16e5_row1_col5" class="data row1 col5" >Lasso</td>
      <td id="T_c16e5_row1_col6" class="data row1 col6" >0.2762</td>
      <td id="T_c16e5_row1_col7" class="data row1 col7" >0.0003</td>
      <td id="T_c16e5_row1_col8" class="data row1 col8" >0.1451</td>
      <td id="T_c16e5_row1_col9" class="data row1 col9" >0.3809</td>
      <td id="T_c16e5_row1_col10" class="data row1 col10" >0.2744</td>
      <td id="T_c16e5_row1_col11" class="data row1 col11" >0.0003</td>
      <td id="T_c16e5_row1_col12" class="data row1 col12" >0.1448</td>
      <td id="T_c16e5_row1_col13" class="data row1 col13" >0.3805</td>
    </tr>
    <tr>
      <th id="T_c16e5_level0_row2" class="row_heading level0 row2" >2</th>
      <td id="T_c16e5_row2_col0" class="data row2 col0" >0.114820</td>
      <td id="T_c16e5_row2_col1" class="data row2 col1" >0.164142</td>
      <td id="T_c16e5_row2_col2" class="data row2 col2" >0.046086</td>
      <td id="T_c16e5_row2_col3" class="data row2 col3" >0.031888</td>
      <td id="T_c16e5_row2_col4" class="data row2 col4" >0.037127</td>
      <td id="T_c16e5_row2_col5" class="data row2 col5" >KNN</td>
      <td id="T_c16e5_row2_col6" class="data row2 col6" >2704.7259</td>
      <td id="T_c16e5_row2_col7" class="data row2 col7" >2.4129</td>
      <td id="T_c16e5_row2_col8" class="data row2 col8" >74169244.3017</td>
      <td id="T_c16e5_row2_col9" class="data row2 col9" >8612.1568</td>
      <td id="T_c16e5_row2_col10" class="data row2 col10" >1600.6971</td>
      <td id="T_c16e5_row2_col11" class="data row2 col11" >1.4299</td>
      <td id="T_c16e5_row2_col12" class="data row2 col12" >29878659.1807</td>
      <td id="T_c16e5_row2_col13" class="data row2 col13" >5466.1375</td>
    </tr>
    <tr>
      <th id="T_c16e5_level0_row3" class="row_heading level0 row3" >3</th>
      <td id="T_c16e5_row3_col0" class="data row3 col0" >0.764832</td>
      <td id="T_c16e5_row3_col1" class="data row3 col1" >0.679068</td>
      <td id="T_c16e5_row3_col2" class="data row3 col2" >0.615531</td>
      <td id="T_c16e5_row3_col3" class="data row3 col3" >0.560981</td>
      <td id="T_c16e5_row3_col4" class="data row3 col4" >0.284168</td>
      <td id="T_c16e5_row3_col5" class="data row3 col5" >DecisionTree</td>
      <td id="T_c16e5_row3_col6" class="data row3 col6" >6.0886</td>
      <td id="T_c16e5_row3_col7" class="data row3 col7" >0.0036</td>
      <td id="T_c16e5_row3_col8" class="data row3 col8" >31415.8306</td>
      <td id="T_c16e5_row3_col9" class="data row3 col9" >177.2451</td>
      <td id="T_c16e5_row3_col10" class="data row3 col10" >0.0000</td>
      <td id="T_c16e5_row3_col11" class="data row3 col11" >0.0000</td>
      <td id="T_c16e5_row3_col12" class="data row3 col12" >0.0000</td>
      <td id="T_c16e5_row3_col13" class="data row3 col13" >0.0000</td>
    </tr>
    <tr>
      <th id="T_c16e5_level0_row4" class="row_heading level0 row4" >4</th>
      <td id="T_c16e5_row4_col0" class="data row4 col0" >0.822813</td>
      <td id="T_c16e5_row4_col1" class="data row4 col1" >0.763693</td>
      <td id="T_c16e5_row4_col2" class="data row4 col2" >0.719062</td>
      <td id="T_c16e5_row4_col3" class="data row4 col3" >0.681802</td>
      <td id="T_c16e5_row4_col4" class="data row4 col4" >0.649315</td>
      <td id="T_c16e5_row4_col5" class="data row4 col5" >SVR</td>
      <td id="T_c16e5_row4_col6" class="data row4 col6" >79.2924</td>
      <td id="T_c16e5_row4_col7" class="data row4 col7" >0.2376</td>
      <td id="T_c16e5_row4_col8" class="data row4 col8" >5541985.4179</td>
      <td id="T_c16e5_row4_col9" class="data row4 col9" >2354.1422</td>
      <td id="T_c16e5_row4_col10" class="data row4 col10" >133.0144</td>
      <td id="T_c16e5_row4_col11" class="data row4 col11" >0.2799</td>
      <td id="T_c16e5_row4_col12" class="data row4 col12" >17917091.8001</td>
      <td id="T_c16e5_row4_col13" class="data row4 col13" >4232.8586</td>
    </tr>
    <tr>
      <th id="T_c16e5_level0_row5" class="row_heading level0 row5" >5</th>
      <td id="T_c16e5_row5_col0" class="data row5 col0" >0.823545</td>
      <td id="T_c16e5_row5_col1" class="data row5 col1" >0.749054</td>
      <td id="T_c16e5_row5_col2" class="data row5 col2" >0.907314</td>
      <td id="T_c16e5_row5_col3" class="data row5 col3" >0.944865</td>
      <td id="T_c16e5_row5_col4" class="data row5 col4" >0.747961</td>
      <td id="T_c16e5_row5_col5" class="data row5 col5" >XGB</td>
      <td id="T_c16e5_row5_col6" class="data row5 col6" >376.0907</td>
      <td id="T_c16e5_row5_col7" class="data row5 col7" >0.2766</td>
      <td id="T_c16e5_row5_col8" class="data row5 col8" >6059784.5000</td>
      <td id="T_c16e5_row5_col9" class="data row5 col9" >2461.6630</td>
      <td id="T_c16e5_row5_col10" class="data row5 col10" >352.3998</td>
      <td id="T_c16e5_row5_col11" class="data row5 col11" >0.2559</td>
      <td id="T_c16e5_row5_col12" class="data row5 col12" >3766907.7500</td>
      <td id="T_c16e5_row5_col13" class="data row5 col13" >1940.8523</td>
    </tr>
    <tr>
      <th id="T_c16e5_level0_row6" class="row_heading level0 row6" >6</th>
      <td id="T_c16e5_row6_col0" class="data row6 col0" >0.267600</td>
      <td id="T_c16e5_row6_col1" class="data row6 col1" >0.580093</td>
      <td id="T_c16e5_row6_col2" class="data row6 col2" >0.534392</td>
      <td id="T_c16e5_row6_col3" class="data row6 col3" >0.657517</td>
      <td id="T_c16e5_row6_col4" class="data row6 col4" >0.731195</td>
      <td id="T_c16e5_row6_col5" class="data row6 col5" >MLP</td>
      <td id="T_c16e5_row6_col6" class="data row6 col6" >224.8689</td>
      <td id="T_c16e5_row6_col7" class="data row6 col7" >0.3986</td>
      <td id="T_c16e5_row6_col8" class="data row6 col8" >3810155.6916</td>
      <td id="T_c16e5_row6_col9" class="data row6 col9" >1951.9620</td>
      <td id="T_c16e5_row6_col10" class="data row6 col10" >222.3614</td>
      <td id="T_c16e5_row6_col11" class="data row6 col11" >0.3530</td>
      <td id="T_c16e5_row6_col12" class="data row6 col12" >6167679.8511</td>
      <td id="T_c16e5_row6_col13" class="data row6 col13" >2483.4814</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<ol class="arabic simple">
<li><p>Ridge</p>
<ul class="simple">
<li><p>Test RMSE = 76.07, Train RMSE = 76.31 → brecha mínima → casi sin sobreajuste.</p></li>
<li><p>p-value BDS (dim2) = 0.00036 (muy bajo) → residuos no independientes → indica estructura no lineal no capturada.</p></li>
<li><p>Conclusión: modelo estable, pero puede mejorar agregando no linealidad (PolynomialFeatures).</p></li>
</ul>
</li>
<li><p>Lasso</p>
<ul class="simple">
<li><p>Test RMSE = 0.38, Train RMSE = 0.38 → casi perfecto (irreal).</p></li>
<li><p>p-value BDS = 0.17 (alto) → residuos parecen aleatorios → posible fuga de información.</p></li>
</ul>
</li>
<li><p>DecisionTree</p>
<ul class="simple">
<li><p>Test RMSE = 177.24, Train RMSE = 0 → sobreajuste extremo.</p></li>
<li><p>p-value BDS = 0.76 (alto) → residuos aleatorios → porque memorizó el Train.</p></li>
</ul>
</li>
</ol>
</section>
<section id="conclusion">
<h2><strong>Conclusión</strong><a class="headerlink" href="#conclusion" title="Link to this heading">#</a></h2>
<p>Se evaluaron diferentes algoritmos de regresión (Ridge, Lasso, KNN, Decision Tree, SVR, XGB y MLP) con el objetivo de predecir el salario promedio, cuya media es <strong>157,018</strong>. La comparación se realizó utilizando métricas en el conjunto de prueba (MAE, MAPE, MSE, RMSE) y el test BDS para verificar la independencia de los residuos.</p>
<p>En conjunto, se concluye que los modelos <strong>lineales regularizados (Ridge y Lasso) y los no lineales (KNN, DecisionTree, SVR, XGB)</strong> ofrecen soluciones sólidas y estadísticamente confiables, mientras que el MLP requiere precaución en su interpretación debido a posibles violaciones de independencia.</p>
<p><strong>Principales hallazgos:</strong></p>
<ol class="arabic simple">
<li><p><strong>Ridge Regression</strong> presentó un <strong>RMSE de 76</strong>, lo que implica un error prácticamente nulo en relación con la media salarial. Sin embargo, el test BDS reveló dependencia no lineal en los residuos, lo que indica que el modelo no captura completamente la estructura del problema, posiblemente por falta de complejidad en las interacciones.</p></li>
<li><p><strong>Lasso</strong> reportó un RMSE extremadamente bajo (0.38), lo que resulta poco realista y sugiere <strong>fuga de información (data leakage)</strong>. Este comportamiento amerita una revisión de correlaciones con la variable objetivo y la validación del pipeline.</p></li>
<li><p><strong>MLP (Multilayer Perceptron)</strong> mostró un <strong>RMSE de 1,952</strong>, equivalente a un error relativo del <strong>1.24%</strong> respecto a la media salarial. Además, los residuos son independientes según el test BDS, lo que evidencia un modelo estable, robusto y sin señales de sobreajuste. Esto convierte a MLP en una alternativa sólida para producción.</p></li>
<li><p><strong>Decision Tree</strong> arrojó un RMSE bajo en test <strong>(177)</strong> pero con error <strong>cero en entrenamiento</strong>, lo que indica sobreajuste severo y poca capacidad de generalización.</p></li>
<li><p><strong>KNN, SVR y XGB</strong> presentaron errores significativamente más altos que Ridge y MLP, por lo que no se consideran competitivos en su configuración actual.</p></li>
</ol>
<section id="conclusion-general">
<h3>Conclusión general:<a class="headerlink" href="#conclusion-general" title="Link to this heading">#</a></h3>
<p>Los resultados muestran que <strong>Ridge y MLP</strong> son los modelos más prometedores. Ridge ofrece la mejor precisión en términos absolutos, aunque con evidencia de dependencia no lineal que puede mitigarse incorporando características polinómicas o interacciones. MLP, por su parte, logra un desempeño sobresaliente con residuos independientes, lo que lo convierte en la opción más confiable para entornos productivos, especialmente cuando se prioriza robustez frente a posibles sesgos del modelo.</p>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="intro.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Welcome to your Jupyter Book</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#introduccion"><strong>Introducción</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objetivo"><strong>Objetivo</strong></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#importaciones-y-configuracion-inicial">1. Importaciones y configuración inicial</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#carga-de-datos-y-seleccion-de-columnas">2. Carga de datos y selección de columnas</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-exploratorio-de-datos-eda">3. Análisis exploratorio de datos - EDA</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dataset"><strong>Dataset</strong></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#variables"><strong>Variables</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#distribucion-de-variables-numericas">Distribución de variables numéricas</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#distribucion-de-variables-categoricas">Distribución de variables categóricas</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#tasa-anual-de-contratacion-de-profesionales-en-ciencia-de-datos">Tasa anual de contratación de profesionales en ciencia de datos</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#impacto-del-nivel-de-experiencia-en-las-oportunidades-de-empleo-cada-ano">Impacto del nivel de experiencia en las oportunidades de empleo cada año</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#cambio-de-salarios-a-lo-largo-del-tiemp">Cambio de salarios a lo largo del tiemp</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#distribucion-salarial-segun-el-nivel-de-experiencia">Distribución salarial según el nivel de experiencia</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#salarios-segun-el-tipo-de-empleo">Salarios según el tipo de empleo</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#titulos-de-trabajo-con-los-salarios-promedios-mas-altos">Títulos de trabajo con los salarios promedios más altos</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#los-titulos-de-trabajo-mas-comunes">Los títulos de trabajo más comunes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#impacto-del-trabajo-remoto-en-el-salario">Impacto del trabajo remoto en el salario</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#influencia-del-tamano-de-la-empresa-en-el-salario">Influencia del tamaño de la empresa en el salario</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#relacion-entre-el-tamano-de-la-empresa-y-la-contratacion-de-empleados-remotos">Relación entre el tamaño de la empresa y la contratación de empleados remotos</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#matriz-de-correlacion">Matriz de correlación</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#split-train-test">4. Split Train / Test</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#preprocesamiento">5. Preprocesamiento</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#modelos-y-busqueda-de-hiperparametros">6. Modelos y búsqueda de hiperparámetros</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#funciones-auxiliares">7. Funciones auxiliares</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#loop-para-evaluar-modelos-graficas-bds">8. Loop para evaluar modelos + gráficas + BDS</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#dataframe-de-resultados-y-grafico-comparativo">9. DataFrame de resultados y gráfico comparativo</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion"><strong>Conclusión</strong></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#conclusion-general">Conclusión general:</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Laura Cardona Ahumada, Elian Martinez Orozco, Evelyn Mondul y Luis Pino Perez
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>